import{Ka as m,Oa as n,Qa as s,Ta as l,Va as u,a as c,e as p,h as g}from"./chunk-LOSKLSOT.js";import{g as r}from"./chunk-RA2WU32H.js";var h=class d{constructor(e){this.firestore=e}usuarioLogueadoSource=new c(null);pacienteHistoriaClinicaEmail=new c(null);pacienteHistoriaClinicaFechaSolicitud=new c(null);pacienteHistoriaClinicaEditable=new c(null);sub;usuarioLogueado$=this.usuarioLogueadoSource.asObservable();pacienteHistoriaClinicaEmail$=this.pacienteHistoriaClinicaEmail.asObservable();pacienteHistoriaClinicaFechaSolicitud$=this.pacienteHistoriaClinicaFechaSolicitud.asObservable();pacienteHistoriaClinicaEditable$=this.pacienteHistoriaClinicaEditable.asObservable();get usuarioLogueado(){return this.usuarioLogueadoSource.value}obtenerUsuarioLogueado(){return this.usuarioLogueado}setUsuarioLogueado(e){this.usuarioLogueadoSource.next(e),console.log("Se seteo el usuario logueado: "+this.usuarioLogueado)}setPacienteHistoriaClinica(e,i,t=null){this.pacienteHistoriaClinicaEmail.next(e),this.pacienteHistoriaClinicaFechaSolicitud.next(t),this.pacienteHistoriaClinicaEditable.next(i),console.log("Se seteo el paciente para la HC: "+this.usuarioLogueado)}get pacienteHistoriaClinica(){return this.pacienteHistoriaClinicaEmail.value}get pacienteHistoriaClinicaFecha(){return this.pacienteHistoriaClinicaFechaSolicitud.value}get pacienteHistoriaClinicaEditablee(){return this.pacienteHistoriaClinicaEditable.value}logout(){this.usuarioLogueadoSource.next(null)}getUserRole(e){return r(this,null,function*(){let i=n(this.firestore,"usuarios"),t=l(i,u("email","==",e)),o=yield s(t);return o.empty?null:o.docs[0].data().rol})}userWasAccepted(e){return r(this,null,function*(){let i=n(this.firestore,"usuarios"),t=l(i,u("email","==",e)),o=yield s(t);return o.empty?null:o.docs[0].data().aceptado})}usuarioEstaHabilitado(e){return r(this,null,function*(){let i=n(this.firestore,"usuarios"),t=l(i,u("email","==",e)),o=yield s(t);return o.empty?null:o.docs[0].data().habilitado??null})}getUserEntity(e){return r(this,null,function*(){try{let i=n(this.firestore,"usuarios"),t=l(i,u("email","==",e)),o=yield s(t);return o.empty?(console.warn(`No se encontr\xF3 un usuario con el email: ${e}`),null):o.docs[0].data()}catch(i){return console.error("Error al obtener el usuario:",i),null}})}obtenerNombreCompletoDesdeEmail(e){return r(this,null,function*(){let i=n(this.firestore,"usuarios"),t=l(i,u("email","==",e)),o=yield s(t);if(!o.empty){let a=o.docs[0].data();return`${a.apellido??""} ${a.nombre??""}`.trim()||null}return null})}isLoggedIn(){let e=this.usuarioLogueadoSource.value!==null;return console.log("Checking login status:",e),e}static \u0275fac=function(i){return new(i||d)(g(m))};static \u0275prov=p({token:d,factory:d.\u0275fac,providedIn:"root"})};export{h as a};
